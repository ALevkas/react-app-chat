(this["webpackJsonpreact-template"]=this["webpackJsonpreact-template"]||[]).push([[0],{81:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t),n.d(t,"Context",(function(){return R}));var c=n(0),r=n.n(c),i=n(16),a=n.n(i),s=(n(81),n(27)),o=n(43),j=n(118),d=n(121),l=n(122),u=n(127),b="/login",h="/chat",x=n(31),O=n(7),p=function(){var e=Object(c.useContext)(R).auth,t=Object(x.a)(e),n=Object(s.a)(t,1)[0];return Object(O.jsx)("header",{className:"header",children:Object(O.jsx)(j.a,{position:"static",children:Object(O.jsx)(d.a,{children:Object(O.jsx)(l.a,{container:!0,justify:"flex-end",children:n?Object(O.jsx)(u.a,{onClick:function(){return e.signOut()},variant:"outlined",children:"\u0412\u044b\u0439\u0442\u0438"}):Object(O.jsx)(o.b,{to:b,children:Object(O.jsx)(u.a,{variant:"outlined",children:"\u0412\u043e\u0439\u0442\u0438"})})})})})})},f=n(18),v=n(41),g=n.n(v),m=n(51),y=n(123),w=n(126),C=n(30),k=n(128),I=n(124),A=n(67),T=function(){return Object(O.jsx)(y.a,{children:Object(O.jsx)(l.a,{container:!0,style:{height:window.innerHeight-64},alignItems:"center",justify:"center",children:Object(O.jsx)(l.a,{container:!0,alignItems:"center",direction:"column",children:Object(O.jsxs)("div",{class:"lds-spinner",children:[Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{})]})})})})},F=[{path:b,Component:function(){var e=Object(c.useContext)(R).auth,t=function(){var t=Object(m.a)(g.a.mark((function t(){var n,c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new C.a.auth.GoogleAuthProvider,t.next=3,e.signInWithPopup(n);case 3:c=t.sent,console.log(c);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(O.jsx)(y.a,{children:Object(O.jsx)(l.a,{container:!0,style:{height:window.innerHeight-64},alignItems:"center",justify:"center",children:Object(O.jsx)(l.a,{style:{width:400,background:"lightblue"},container:!0,alignItems:"center",direction:"column",children:Object(O.jsx)(w.a,{p:5,children:Object(O.jsx)(u.a,{onClick:t,variant:"outlined",children:"\u0412\u043e\u0439\u0442\u0438 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e Google"})})})})})}}],B=[{path:h,Component:function(){var e=Object(c.useContext)(R),t=e.auth,n=e.firestore,r=Object(x.a)(t),i=Object(s.a)(r,1)[0],a=Object(A.a)(n.collection("messages").orderBy("createdAt")),o=Object(s.a)(a,2),j=o[0],d=o[1],b=Object(c.useRef)(null),h=Object(c.useState)(""),p=Object(s.a)(h,2),f=p[0],v=p[1],w=function(){var e=Object(m.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.collection("messages").add({uid:i.uid,displayName:i.displayName,photoURL:i.photoURL,text:f,createdAt:C.a.firestore.FieldValue.serverTimestamp()}),v("");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){b.current&&(b.current.scrollTop=b.current.scrollHeight)}),[j]),d?Object(O.jsx)(T,{}):Object(O.jsx)(y.a,{children:Object(O.jsxs)(l.a,{container:!0,style:{height:window.innerHeight-84,marginTop:20},justify:"center",children:[Object(O.jsx)("div",{ref:b,style:{width:"80%",height:"70vh",background:"#fff",border:"1px solid gray",overflowY:"auto",borderRadius:"6px",scrollTop:"999",padding:"25px"},children:j.map((function(e){return Object(O.jsx)("div",{style:{margin:10,marginLeft:i.uid===e.uid?"calc(80% - 60px)":"10px",width:"fit-content",padding:5},children:Object(O.jsx)(l.a,{container:!0,children:Object(O.jsxs)("div",{style:{display:"flex",direction:"row",gap:10},children:[Object(O.jsx)(k.a,{src:e.photoURL}),Object(O.jsxs)(l.a,{container:!0,direction:"column",children:[Object(O.jsx)("div",{style:{fontWeight:"bold",color:"rgb(25, 118, 210)"},children:e.displayName})," ",Object(O.jsx)("div",{children:e.text})]})]})})})}))}),Object(O.jsxs)(l.a,{container:!0,direction:"column",alignItems:"flex-end",style:{width:"80%"},children:[Object(O.jsx)(I.a,{variant:"outlined",fullWidth:!0,rowsMax:2,value:f,onChange:function(e){return v(e.target.value)},onKeyUp:function(e){"Enter"===e.key&&w()},style:{background:"#fff"}}),Object(O.jsx)(u.a,{onClick:w,variant:"outlined",style:{background:"#3F51B5",marginTop:10},children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]})]})})}}],H=function(){var e=Object(c.useContext)(R).auth,t=Object(x.a)(e);return Object(s.a)(t,1)[0]?Object(O.jsxs)(f.d,{children:[B.map((function(e){var t=e.path,n=e.Component;return Object(O.jsx)(f.b,{path:t,component:n,exact:!0},t)})),Object(O.jsx)(f.a,{to:h})]}):Object(O.jsxs)(f.d,{children:[F.map((function(e){var t=e.path,n=e.Component;return Object(O.jsx)(f.b,{path:t,component:n,exact:!0},t)})),Object(O.jsx)(f.a,{to:b})]})};var L=function(){var e=Object(c.useContext)(R).auth,t=Object(x.a)(e),n=Object(s.a)(t,3),r=(n[0],n[1]);return n[2],r?Object(O.jsx)(T,{}):Object(O.jsxs)(o.a,{children:[Object(O.jsx)(p,{}),Object(O.jsx)(H,{})]})};n(90),n(91);C.a.initializeApp({apiKey:"AIzaSyDT2yqH4-2-YvslIAp5sVAqmo7gFAucdM0",authDomain:"react-chat-2c86f.firebaseapp.com",projectId:"react-chat-2c86f",storageBucket:"react-chat-2c86f.appspot.com",messagingSenderId:"106764172728",appId:"1:106764172728:web:19e6fb83577fef0f12234d",measurementId:"G-2FBFFTWXLQ"});var R=Object(c.createContext)(null),N=C.a.auth(),S=C.a.firestore();a.a.render(Object(O.jsx)(R.Provider,{value:{firebase:C.a,auth:N,firestore:S},children:Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(L,{})})}),document.getElementById("root"))}},[[92,1,2]]]);
//# sourceMappingURL=main.0d6c414b.chunk.js.map